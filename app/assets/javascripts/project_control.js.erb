/** Controller for new project form */
var CreateProjectController = function($scope, Project) {
  $scope.project = new Project();
  $scope.hasErrors = false;
  $scope.errors = {};
  $scope.success = false;

  /** Create the project or list errors */
  $scope.create = function() {
    $scope.project.$create(function(data) {
      $scope.success = true;
      $scope.hasErrors = false;
    }, function(data) {
      var data = appErrorsAsArray(data);
      $scope.errors = data;
      $scope.hasErrors = data.length;
    });
  };
}

CreateProjectController.$inject = ['$scope', 'Project'];

/** Controller for list project form */
var ListProjectController = function($scope, Project) {
  $scope.projects = [];
  $scope.projectCount = 0;
  $scope.nav = function(url) { document.location = url; }

  Project.query(function(data) {
    for (var d in data) {
      data[d].viewUrl = ListProjectControllerData.baseViewUrl + "/" + data[d].id;
      data[d].editUrl = ListProjectControllerData.baseEditUrl + "/" + data[d].id;
      data[d].deleteUrl = ListProjectControllerData.baseDeleteUrl + "/" + data[d].id;
    }
    $scope.projects = data;
    $scope.projectCount = $scope.projects.length;
  });
}

ListProjectController.$inject = ['$scope', 'Project'];

/** Controller for view project form */
var ViewProjectController = function($scope, Project) {
  $scope.project = new Project()
  Project.get({id:ViewProjectControllerData.id}, function(data) {
    $scope.project = data;
  }, function() {
    alert("Bad id");
  });
}

ViewProjectController.$inject = ['$scope', 'Project'];
